group 'com.pragmatic'
version '1.0-SNAPSHOT'

apply plugin: 'java'
apply plugin: 'checkstyle'

sourceCompatibility = 1.9
targetCompatibility = 1.9
compileJava.options.encoding = 'UTF-8'

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'org.testng', name: 'testng', version: '6.14.3'
    compile group: 'io.appium', name: 'java-client', version: '6.0.0-BETA5'
    compile group: 'io.rest-assured', name: 'rest-assured', version: '3.1.0'
    compile group: 'org.codehaus.jackson', name: 'jackson-mapper-asl', version: '1.9.13'
    compile group: 'io.cucumber', name: 'cucumber-java', version: '3.0.2'
    compile group: 'info.cukes', name: 'cucumber-testng', version: '1.2.5'
}

// Force checks on build and test tasks.
build.dependsOn(check)
test.dependsOn(check)

// Do not run tests in check task (only run checkstyle).
check.dependsOn.remove(test)

task calcTests(type: Test, description: 'Calculator Tests', group: 'Verification') {

    systemProperty "config", findProperty("config")

    useTestNG() {
        //report generation delegated to TestNG library:
        useDefaultListeners = true
        suites 'src/test/resources/suites/calc.xml'
    }

    //turn off Gradle's HTML report to avoid replacing the
    //reports generated by TestNG library:
    reports.html.enabled = false

    testLogging {
        showStandardStreams = false

        exceptionFormat "full"
        events "passed", "skipped", "failed"
    }
}
